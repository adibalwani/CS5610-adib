<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Table Movies</title>
    <link rel="stylesheet" href="../bootstrap-3.3.2-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../bootstrap-3.3.2-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/003-table.css" />
    <script src="angular.min.js"></script>
    <script src="js/003-table.js"></script>
</head>
<body ng-app="myapp">
    <h1>AngularJS for IMDB with editing</h1>
    <div ng-controller="cntl">
        <div class="col-lg-6">
            <div class="input-group">
                <input type="text" class="form-control" ng-model="searchByTitle" placeholder="Search for Title">
                <span class="input-group-btn">
                    <button class="btn btn-default" ng-click="searchMovies()" type="button">Search</button>
                </span>
            </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->
        <br />
        <br />
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Year</th>
                    <th>Rating</th>
                    <th>Plot</th>
                    <th>&nbsp;</th>
                </tr>
                <tr>
                    <th><input ng-model="movie.title" class="form-control" /></th>
                    <th><input ng-model="movie.year" class="form-control" /></th>
                    <th><input ng-model="movie.rating" class="form-control" /></th>
                    <th><input ng-model="movie.plot" class="form-control" /></th>
                    <th>
                        <button ng-click="addMovie()" class="btn btn-success">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="m in movies">
                    <td>{{m.title}}</td>
                    <td>{{m.year}}</td>
                    <td>{{m.rating}}</td>
                    <td>
                        <img class="poster" ng-src="{{m.urlPoster}}" width="50" />
                        {{m.plot}}
                    </td>
                    <td>
                        <button ng-click="removeMovies(m)" class="btn btn-danger">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                        <button ng-click="selectMovie(m)" class="btn btn-warning">
                            <span class="glyphicon glyphicon-pencil"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
    <div>
        <hr />
        <h1>About the Experiment</h1>
        <p>
            This experiment is a modified version of previous experiment in which data is 
            now displayed in a Table format and user has the ability to modify, add or delete data 
            in the table. movies array is part of $scope i.e. it is accessible by both view and controller 
            and is used to store data about the movies in the table. Different functions are declared in 
            $scope so that they are called when we have ng-click for the button.
        </p>

        <span id="text">
            <pre>
$scope.removeMovies = function (movie) {
    var index = $scope.movies.indexOf(movie);
    $scope.movies.splice(index, 1);
}

$scope.addMovie = function () {
    var newMovie = {
        title: $scope.movie.title,
        year: $scope.movie.year,
        rating: $scope.movie.rating,
        plot: $scope.movie.plot
    };
    $scope.movies.push(newMovie);
}

$scope.selectMovie = function (m) {
    $scope.movie = m;
}
            </pre>
        </span>

    </div>

    <hr />

    <h1>Source Code</h1>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/angular/003-table.html"
           target="_blank">View Source Code</a>
    </div>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/angular/css/style.css"
           target="_blank">View CSS Code</a>
    </div>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/angular/js/003-table.js"
           target="_blank">View JS Code</a>
    </div>
    <hr />
    <h1>Reference</h1>
    <div id="doc">
        Friday's Lecture
    </div>
    <div id="doc">
        <a href="http://www.myapifilms.com/" target="_blank">MyAPIFilms</a>
    </div>

</body>
</html>
