<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Register</title>
    <link rel="stylesheet" href="../bootstrap-3.3.2-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../bootstrap-3.3.2-dist/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha256.js"></script>
    <script src="../Libraries/angular.min.js"></script>
    <script src="js/000-register.js"></script>
</head>
<body ng-app="MyApp" class="container">
    <div ng-controller="MyCntl">
        <h1>Register</h1>
        <hr />
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Sign Up</h2>
                    <h3 class="section-subheading text-muted">It's free and always will be.</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="First Name:" ng-model="firstName" required data-validation-required-message="Please enter your first name.">
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" placeholder="Email address:" ng-model="email" required data-validation-required-message="Please enter your email address.">
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="form-group">
                                <select class="form-control" ng-model="gender" required data-validation-required-message="Please input your gender.">
                                    <option value="" disabled selected>Gender:</option>
                                    <option value="m">Male</option>
                                    <option value="f">Female</option>
                                </select>
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Last Name:" ng-model="lastName" required data-validation-required-message="Please enter your last name.">
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="form-group">
                                <input type="password" class="form-control" placeholder="Password:" ng-model="password" required data-validation-required-message="Please enter your password.">
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-lg-12 text-center">
                            <div id="success"></div>
                            <button type="submit" class="btn btn-xl" ng-click="signUp()">Sign Up</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div>
        <hr />
        <h1>About the Experiment</h1>
        <p>
            Some Carma API calls require a signature to be generated in order to identify the calling client. 
            Hash the full url (the one matching the api documentation NOT one that may be rewritten), the 
            portion of the body if applicable (e.g. for post/put) and your oauth client secret using SHA-256. 
            Take the hex string representation of this hash. The email address of the user being registered is 
            used as the body portion when generating the signature. This page is used in my Project for registering 
            users.
        </p>

        <span id="text">
            <pre>
        sha256.update(api_url);
        sha256.update($scope.email);
        sha256.update(client_secret);
        var hash = sha256.finalize();
        hash = hash.toString(CryptoJS.enc.Hex);
        $http.post(&quot;https://api-dev.car.ma/v2/users/create?client_id=ext-adib-alwani&amp;sendPhoneVerification=false&amp;signature=&quot; + hash, body)
        .success(function (response) {           
        ....
            </pre>
        </span>
    </div>

    <hr />

    <h1>Source Code</h1>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/project-week3/000-register.html"
           target="_blank">View Source Code</a>
    </div>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/project-week3/css/style.css"
           target="_blank">View CSS Code</a>
    </div>
    <div id="doc">
        <a href="../../fileview/Default.aspx?~/experiments/project-week3/js/000-register.js"
           target="_blank">View JS Code</a>
    </div>
    <hr />
    <h1>Reference</h1>
    <div id="doc">
        <a href="https://engineering.car.ma/2015/02/11/generating-the-client-signature/" target="_blank">Carma API</a>
    </div>
</body>
</html>
